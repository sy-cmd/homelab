# System Architecture and Design

Complete architectural overview of the k3s homelab including component interactions, data flows, and deployment patterns.

## ğŸ—ï¸ High-Level Architecture

### System Overview
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        K3s Homelab                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Gitea         â”‚  â”‚   Vault         â”‚  â”‚ Gitea Runner   â”‚  â”‚
â”‚  â”‚   (Git Service) â”‚  â”‚ (Secrets Mgmt)  â”‚  â”‚  (CI/CD)        â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  HTTP: 3000     â”‚  â”‚  HTTP: 8200     â”‚  â”‚  Agent: 8080    â”‚ â”‚
â”‚  â”‚  SSH: 22        â”‚  â”‚  Cluster: 8201  â”‚  â”‚  Executor: K8s  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                   â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                             â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚  â”‚                k3s Kubernetes Cluster                       â”‚  
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”‚   Pods      â”‚  â”‚  Services   â”‚  â”‚   Ingress/Networkingâ”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Gitea     â”‚  â”‚ â€¢ Gitea SVC â”‚  â”‚ â€¢ Traefik Ingress   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Vault     â”‚  â”‚ â€¢ Vault SVC â”‚  â”‚ â€¢ NodePort Services â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Runner    â”‚  â”‚ â€¢ Runner SVCâ”‚  â”‚ â€¢ ClusterIP         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Apps      â”‚  â”‚ â€¢ App SVCs  â”‚  â”‚ â€¢ LoadBalancer      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  
â”‚                             â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚  â”‚             Storage Layer (longhorn CSI driver)             â”‚ 
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”‚ Persistent  â”‚  â”‚   Config    â”‚  â”‚      Secrets        â”‚  â”‚
â”‚  â”‚  â”‚   Volumes   â”‚  â”‚   Maps      â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚ â€¢ Vault Storage     â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Gitea     â”‚  â”‚ â€¢ App Configâ”‚  â”‚ â€¢ Encrypted Data    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Vault     â”‚  â”‚ â€¢ Env Vars  â”‚  â”‚ â€¢ Dynamic Secrets   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Cache     â”‚  â”‚ â€¢ Secrets   â”‚  â”‚ â€¢ Token Store       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Component Interactions

### Data Flow Diagram
```
Developer â†’ Gitea â†’ Webhook â†’ Gitea Runner â†’ Vault â†’ Build â†’ Deploy
    â”‚         â”‚         â”‚           â”‚           â”‚        â”‚        â”‚
    â”‚         â”‚         â”‚           â”‚           â”‚        â”‚        â”‚
    â–¼         â–¼         â–¼           â–¼           â–¼        â–¼        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Code    â”‚ Git Repoâ”‚ Trigger â”‚ Job Queue   â”‚ Secrets â”‚ Docker  â”‚ K8s     â”‚
â”‚ Push    â”‚ Storage â”‚ Event   â”‚ Processing  â”‚ Retrievalâ”‚ Build  â”‚ Deploy â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Service Mesh
```yaml
# Service communication patterns
services:
  gitea:
    ports:
      - "3000:3000"  # HTTP UI
      - "22:22"      # SSH
    dependencies:
      - vault (for secrets)
    integrations:
      - gitlab-runner (webhooks)
  
  vault:
    ports:
      - "8200:8200"  # HTTP API
      - "8201:8201"  # Cluster
    auth_methods:
      - kubernetes
      - token
    secret_engines:
      - kv-v2
      - database
  
  gitea-runner:
    executor: kubernetes
    integrations:
      - vault (secrets injection)
      - gitea (CI triggers)
      - kubernetes (job execution)
```

## ğŸ“Š Detailed Architecture

### 1. Gitea Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Gitea Service                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    Application Layer                        â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚|
â”‚  â”‚  â”‚   Web UI    â”‚  â”‚   API       â”‚  â”‚   Git Operations    â”‚  â”‚|
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚  â”‚|
â”‚  â”‚  â”‚ â€¢ Dashboard â”‚  â”‚ â€¢ REST API  â”‚  â”‚ â€¢ Push/Pull         â”‚  â”‚|
â”‚  â”‚  â”‚ â€¢ Repo Mgmt â”‚  â”‚ â€¢ GraphQL   â”‚  â”‚ â€¢ Branch/Tag        â”‚  â”‚|
â”‚  â”‚  â”‚ â€¢ User Mgmt â”‚  â”‚ â€¢ Webhooks  â”‚  â”‚ â€¢ SSH/HTTP          â”‚  â”‚|
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚|
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    Data Layer                               â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚|
â”‚  â”‚  â”‚   Database  â”‚  â”‚   Storage   â”‚  â”‚      Cache          â”‚  â”‚|
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚  â”‚|
â”‚  â”‚  â”‚ â€¢ Postgres  â”‚  â”‚ â€¢ Git Repos â”‚  â”‚ â€¢ Session Data      â”‚  â”‚|
â”‚  â”‚  â”‚ â€¢ Users     â”‚  â”‚ â€¢ LFS       â”‚  â”‚ â€¢ Query Cache       â”‚  â”‚|
â”‚  â”‚  â”‚ â€¢ Metadata  â”‚  â”‚ â€¢ Attachmentsâ”‚  â”‚ â€¢ Rendered Markdownâ”‚  â”‚|
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚|
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Vault Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Vault Service                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    Core Engine                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”‚   Storage   â”‚  â”‚   Auth      â”‚  â”‚    Secrets Engine   â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ File      â”‚  â”‚ â€¢ Kubernetesâ”‚  â”‚ â€¢ KV-v2 Store       â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Backend   â”‚  â”‚ â€¢ Token     â”‚  â”‚ â€¢ Database Secrets  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Encryptionâ”‚  â”‚ â€¢ Userpass  â”‚  â”‚ â€¢ Dynamic Secrets   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Security Layer                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”‚   Policies   â”‚  â”‚   Audit     â”‚  â”‚     Encryption       â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ RBAC      â”‚  â”‚ â€¢ Logs      â”‚  â”‚ â€¢ Transit Engine     â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ ACLs      â”‚  â”‚ â€¢ Requests  â”‚  â”‚ â€¢ Key Management     â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Tokens    â”‚  â”‚ â€¢ Responses â”‚  â”‚ â€¢ Data Encryption    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Gitea Runner Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitLab Runner Service                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Runner Core                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”‚   Config    â”‚  â”‚   Queue     â”‚  â”‚    Executor          â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ TOML      â”‚  â”‚ â€¢ Job Queue â”‚  â”‚ â€¢ Kubernetes        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Tokens    â”‚  â”‚ â€¢ Priority  â”‚  â”‚ â€¢ Docker             â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Settings  â”‚  â”‚ â€¢ Concurrencyâ”‚  â”‚ â€¢ Shell              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Job Execution                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”‚   Build     â”‚  â”‚   Test      â”‚  â”‚      Deploy          â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Compile   â”‚  â”‚ â€¢ Unit      â”‚  â”‚ â€¢ K8s Apply         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Package   â”‚  â”‚ â€¢ Integrationâ”‚  â”‚ â€¢ Helm Charts       â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Security  â”‚  â”‚ â€¢ E2E       â”‚  â”‚ â€¢ Rollout           â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ Network Architecture

### Service Communication
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Network Topology                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   External  â”‚    â”‚   Ingress   â”‚    â”‚   Internal Services â”‚  â”‚
â”‚  â”‚   Access    â”‚â—„â”€â”€â–ºâ”‚   Layer     â”‚â—„â”€â”€â–ºâ”‚                     â”‚  â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚                     â”‚  â”‚
â”‚  â”‚ â€¢ Browser   â”‚    â”‚ â€¢ Traefik   â”‚    â”‚ â€¢ Gitea (ClusterIP) â”‚  â”‚
â”‚  â”‚ â€¢ Git Clientâ”‚    â”‚ â€¢ NodePort  â”‚    â”‚ â€¢ Vault (ClusterIP) â”‚  â”‚
â”‚  â”‚ â€¢ SSH       â”‚    â”‚ â€¢ LoadBal   â”‚    â”‚ â€¢ Runner (ClusterIP)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    Service Mesh                             â”‚â”‚
â”‚  â”‚                                                             |â”‚
â”‚  â”‚  Gitea â†â†’ Gitea Runner â†â†’ Vault â†â†’ k3s API Server           â”‚|
â”‚  â”‚    â”‚           â”‚              â”‚           â”‚                 â”‚|
â”‚  â”‚    â”‚           â”‚              â”‚           â”‚                 â”‚|
â”‚  â”‚    â–¼           â–¼              â–¼           â–¼                 â”‚|
â”‚  â”‚  Webhooks   CI Jobs      Secrets     K8s Resources          â”‚|
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Port Mapping
```yaml
# External access ports
external_ports:
  gitea_http: 3000    # Gitea web UI
  gitea_ssh: 22       # Git over SSH
  vault_ui: 8200      # Vault web UI
  runner_agent: 8080  # GitLab Runner agent

# Internal service ports
internal_ports:
  gitea_service: 3000
  vault_service: 8200
  vault_cluster: 8201
  runner_service: 8080
  k3s_api: 6443
  traefik: 80, 443
```

## ğŸ”„ CI/CD Pipeline Architecture

### Pipeline Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CI/CD Pipeline Flow                          â”‚
â”‚                                                                 â”‚
â”‚  Developer â†’ Code Push â†’ Gitea â†’ Webhook â†’ GitLab Runner        â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â”‚             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â–¼             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”‚   Job Queue â”‚     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â”‚             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â–¼             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”‚   Build Pod â”‚     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â”‚             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â–¼             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”‚    Vault    â”‚     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”‚   Secrets   â”‚     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â”‚             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â–¼             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”‚   Test &    â”‚     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”‚  Security   â”‚     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â”‚             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚           â–¼             â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”‚   Deploy    â”‚     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â”‚   to K8s    â”‚     â”‚
â”‚      â”‚           â”‚         â”‚          â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Job Types
```yaml
# Supported job types
job_types:
  build:
    - docker_build
    - npm_build
    - maven_build
    - gradle_build
  
  test:
    - unit_tests
    - integration_tests
    - e2e_tests
    - security_scans
  
  deploy:
    - kubernetes_deploy
    - helm_deploy
    - docker_compose_deploy
    - terraform_apply
```

## ğŸ“ˆ Scalability and Performance

### Resource Scaling
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Scaling Architecture                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Vertical  â”‚  â”‚  Horizontal â”‚  â”‚     Auto Scaling    â”‚      â”‚
â”‚  â”‚   Scaling   â”‚  â”‚   Scaling   â”‚  â”‚                     â”‚      â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚      â”‚
â”‚  â”‚ â€¢ CPU/Mem   â”‚  â”‚ â€¢ Replicas  â”‚  â”‚ â€¢ HPA (CPU/Memory)  â”‚      â”‚
â”‚  â”‚ â€¢ Storage   â”‚  â”‚ â€¢ Load Bal  â”‚  â”‚ â€¢ VPA (Resources)   â”‚      â”‚
â”‚  â”‚ â€¢ Network   â”‚  â”‚ â€¢ Sharding  â”‚  â”‚ â€¢ Cluster Autoscale â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Performance                              â”‚  â”‚
â”‚  â”‚                                                                 â”‚
â”‚  â”‚  â€¢ Caching: Redis, In-Memory                                 â”‚  â”‚
â”‚  â”‚  â€¢ CDN: Static Assets                                        â”‚  â”‚
â”‚  â”‚  â€¢ Database: Connection Pooling, Indexing                   â”‚  â”‚
â”‚  â”‚  â€¢ Network: Service Mesh, Load Balancing                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Performance Metrics
```yaml
# Key performance indicators
metrics:
  response_time:
    gitea_ui: "< 200ms"
    gitea_api: "< 100ms"
    vault_api: "< 50ms"
    runner_jobs: "< 5min"
  
  throughput:
    git_operations: "1000 req/min"
    vault_requests: "500 req/min"
    ci_jobs: "10 concurrent"
  
  availability:
    uptime_target: "99.9%"
    recovery_time: "< 30s"
    backup_frequency: "daily"
```

## ğŸ”’ Security Architecture

### Security Layers
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Architecture                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Network   â”‚  â”‚ Application â”‚  â”‚      Data           â”‚      â”‚
â”‚  â”‚   Security  â”‚  â”‚   Security  â”‚  â”‚    Security         â”‚      â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚      â”‚
â”‚  â”‚ â€¢ Firewalls â”‚  â”‚ â€¢ RBAC      â”‚  â”‚ â€¢ Encryption        â”‚      â”‚
â”‚  â”‚ â€¢ TLS/SSL   â”‚  â”‚ â€¢ AuthN     â”‚  â”‚ â€¢ Secrets Mgmt      â”‚      â”‚
â”‚  â”‚ â€¢ VPN       â”‚  â”‚ â€¢ AuthZ     â”‚  â”‚ â€¢ Access Control    â”‚      â”‚
â”‚  â”‚ â€¢ Segments  â”‚  â”‚ â€¢ Policies  â”‚  â”‚ â€¢ Audit Logs         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚   
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Access Control Matrix
```yaml
# Role-based access control
rbac_matrix:
  admin:
    gitea: ["read", "write", "admin"]
    vault: ["read", "write", "delete", "manage"]
    kubernetes: ["*"]
  
  developer:
    gitea: ["read", "write"]
    vault: ["read", "write"]
    kubernetes: ["get", "list", "watch", "create", "update"]
  
  runner:
    gitea: ["read"]
    vault: ["read"]
    kubernetes: ["get", "list", "watch", "create", "delete"]
  
  readonly:
    gitea: ["read"]
    vault: ["read"]
    kubernetes: ["get", "list", "watch"]
```

## ğŸ”„ Deployment Patterns

### Infrastructure as Code
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Deployment Architecture                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   GitOps    â”‚  â”‚   Helm      â”‚  â”‚      Kustomize       â”‚      â”‚
â”‚  â”‚   Workflow  â”‚  â”‚   Charts    â”‚  â”‚      Overlays        â”‚      â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚      â”‚
â”‚  â”‚ â€¢ Git Repo  â”‚  â”‚ â€¢ Templates â”‚  â”‚ â€¢ Base Configs      â”‚      â”‚
â”‚  â”‚             â”‚  â”‚ â€¢ Values    â”‚  â”‚ â€¢ Environment Vars  â”‚      â”‚
â”‚  â”‚             â”‚  â”‚ â€¢ Releases  â”‚  â”‚ â€¢ Resource Patches   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Environment Mgmt                          â”‚  â”‚
â”‚  â”‚                                                                 â”‚
â”‚  â”‚  â€¢ Development: Single node, minimal resources               â”‚  â”‚
â”‚  â”‚  â€¢ Staging: Multi-node, production-like                      â”‚  â”‚
â”‚  â”‚  â€¢ Production: High availability, backup, monitoring         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```